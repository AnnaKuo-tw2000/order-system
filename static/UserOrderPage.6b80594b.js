import{E as I}from"./button.d46e449a.js";import{E as F}from"./overlay.207610d6.js";import{u as E}from"./cart.8a1a5f3a.js";import{_ as L,G as V,r as b,C as j,f as g,h as t,F as D,J as O,u as m,j as d,l as n,k as T,Q as U,O as w,m as v,y as C,p as f,n as B,D as N,E as A,N as P}from"./entry.7c31a8c4.js";import{u as G}from"./auth.57b5a3b8.js";const u=i=>(N("data-v-8deac67d"),i=i(),A(),i),J={class:"bg-[url('/img/bg-1.jpg')] p-12 flex justify-center gap-10 text-amber-950 w-full"},Q={class:"w-1/5"},R=u(()=>t("div",{class:"text-3xl leading-[3] text-center"},"線上訂購美食",-1)),q={class:"text-xl"},z={class:"flex flex-col gap-10 w-[70%]"},H=u(()=>t("h1",{class:"text-3xl text-center"}," 訂餐列表 ",-1)),K={class:"flex flex-wrap px-2 w-full gap-6"},M=["src"],W={class:"text-2xl leading-loose font-semibold"},X=u(()=>t("div",{class:"w-24 border-b border-black mb-3"},null,-1)),Y={class:"text-xl font-semibold mb-1"},Z=u(()=>t("span",null," 要登入才能存取購物車資料喔 ",-1)),ee={class:"dialog-footer"},te={__name:"UserOrderPage",setup(i){const _=G(),x=V(),p=b([]);function y(){U(w(x,"foodInfo")).then(s=>{s.exists()&&(p.value=s.val(),console.log(p.value))}).catch(s=>{console.error(s)})}y();const l=b(!1),h=E();function $(s){var r;let e=1;if((r=_.userInfo)!=null&&r.uid){if(h.cartList){console.log("有東西");const c=h.cartList.find(o=>o.uid===s.uid);c&&(e=c.num+1)}console.log("沒東西"),P(w(x,`userInfo/${_.userInfo.uid}/shoppingCart/${s.uid}`),{...s,num:e})}else l.value=!0}const k=b("all"),a=s=>{k.value=s},S=j(()=>{const s=Object.values(p.value);return s.filter(e=>{switch(k.value){case"salad":return e.type==="沙拉";case"snack":return e.type==="小點";case"main course":return e.type==="主餐";case"dessert":return e.type==="甜點";default:return s}})});return(s,e)=>{const r=I,c=F;return v(),g("div",J,[t("div",Q,[R,t("ul",q,[t("li",{onClick:e[0]||(e[0]=o=>a("all")),class:"border-b border-black leading-loose hover:bg-amber-950 hover:text-white cursor-pointer"},"全部餐點 "),t("li",{onClick:e[1]||(e[1]=o=>a("main course")),class:"border-b border-black leading-loose hover:bg-amber-950 hover:text-white cursor-pointer"}," 精緻主餐"),t("li",{onClick:e[2]||(e[2]=o=>a("snack")),class:"border-b border-black leading-loose hover:bg-amber-950 hover:text-white cursor-pointer"}," 精選小點"),t("li",{onClick:e[3]||(e[3]=o=>a("salad")),class:"border-b border-black leading-loose hover:bg-amber-950 hover:text-white cursor-pointer"}," 營養沙拉"),t("li",{onClick:e[4]||(e[4]=o=>a("dessert")),class:"border-b border-black leading-loose hover:bg-amber-950 hover:text-white cursor-pointer"}," 甜蜜蜜甜點")])]),t("section",z,[H,t("div",K,[(v(!0),g(D,null,O(m(S),o=>(v(),g("div",{key:o.uid,class:"flex flex-col w-[250px] h-[300px] items-center shadow-lg text-center max-[885px]:w-[205px]"},[t("img",{src:o.imageUrl,alt:"",class:"mb-5 w-[100px] h-[100px] mt-4 object-cover"},null,8,M),t("div",W,C(o.title),1),X,t("div",Y,"$"+C(o.price),1),d(r,{class:"w-[90%] mt-5",onClick:se=>$(o)},{default:n(()=>[f("加入購物車")]),_:2},1032,["onClick"])]))),128))])]),d(c,{modelValue:m(l),"onUpdate:modelValue":e[7]||(e[7]=o=>T(l)?l.value=o:null),title:"請登入",width:"40%"},{footer:n(()=>[t("span",ee,[d(r,{onClick:e[5]||(e[5]=o=>l.value=!1)},{default:n(()=>[f("取消")]),_:1}),d(r,{type:"primary",onClick:e[6]||(e[6]=o=>("navigateTo"in s?s.navigateTo:m(B))("auth/login"))},{default:n(()=>[f(" 登入 ")]),_:1})])]),default:n(()=>[Z]),_:1},8,["modelValue"])])}}},ie=L(te,[["__scopeId","data-v-8deac67d"]]);export{ie as default};
